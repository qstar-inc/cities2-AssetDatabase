/*! For license information please see db.js.LICENSE.txt */
(()=>{function t(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))}))}return r}function e(t,r,e){return(r=function(t){var r=function(t,r){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,r||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==n(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=a.call(e)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,r)||i(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=i(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==e.return||e.return()}finally{if(u)throw a}}}}function i(t,r){if(t){if("string"==typeof t)return c(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,r):void 0}}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function u(){"use strict";u=function(){return r};var t,r={},e=Object.prototype,o=e.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(t){f=function(t,r,e){return t[r]=e}}function p(t,r,e,n){var o=r&&r.prototype instanceof b?r:b,i=Object.create(o.prototype),c=new _(n||[]);return a(i,"_invoke",{value:P(t,e,c)}),i}function d(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=p;var h="suspendedStart",v="suspendedYield",y="executing",g="completed",w={};function b(){}function m(){}function x(){}var D={};f(D,c,(function(){return this}));var k=Object.getPrototypeOf,j=k&&k(k(G([])));j&&j!==e&&o.call(j,c)&&(D=j);var I=x.prototype=b.prototype=Object.create(D);function S(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function E(t,r){function e(a,i,c,u){var s=d(t[a],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){e("next",t,c,u)}),(function(t){e("throw",t,c,u)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return e("throw",t,c,u)}))}u(s.arg)}var i;a(this,"_invoke",{value:function(t,n){function o(){return new r((function(r,o){e(t,n,r,o)}))}return i=i?i.then(o,o):o()}})}function P(r,e,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===w)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=d(r,e,n);if("normal"===s.type){if(o=n.done?g:v,s.arg===w)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function L(r,e){var n=e.method,o=r.iterator[n];if(o===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,L(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=d(o,r.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,w;var i=a.arg;return i?i.done?(e[r.resultName]=i.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,w):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function A(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function G(r){if(r||""===r){var e=r[c];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,i=function e(){for(;++a<r.length;)if(o.call(r,a))return e.value=r[a],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(n(r)+" is not iterable")}return m.prototype=x,a(I,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:m,configurable:!0}),m.displayName=f(x,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},r.awrap=function(t){return{__await:t}},S(E.prototype),f(E.prototype,s,(function(){return this})),r.AsyncIterator=E,r.async=function(t,e,n,o,a){void 0===a&&(a=Promise);var i=new E(p(t,e,n,o),a);return r.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(I),f(I,l,"Generator"),f(I,c,(function(){return this})),f(I,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=G,_.prototype={constructor:_,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!r)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(n,o){return c.type="throw",c.arg=r,e.next=n,o&&(e.method="next",e.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,w):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),w},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),w}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:G(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),w}},r}function s(t,r,e,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var a=t.apply(r,e);function i(t){s(a,n,o,i,c,"next",t)}function c(t){s(a,n,o,i,c,"throw",t)}i(void 0)}))}}var f,p=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;function d(){return d=l(u().mark((function t(){var r,e,n=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.length>0&&void 0!==n[0]&&n[0],e=p.open("cities2-AssetDatabase"),console.log("Starting InitDB"),e.onerror=function(t){console.log("Why didn't you allow cities2-AssetDatabase to use IndexedDB?: "+t.target.errorCode)},e.onsuccess=function(){var t=l(u().mark((function t(e){var n,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=e.target.result,currentVersion=f.version,f.objectStoreNames.contains("assetData")&&f.objectStoreNames.contains("langData")&&f.objectStoreNames.contains("supportedMods")||(f.close(),q(),m(f)),t.next=5,x();case 5:if(0!=(n=t.sent)){t.next=12;break}return t.next=9,fetchAndProcessData();case 9:return t.next=11,x();case 11:n=t.sent;case 12:if(console.log("Found ".concat(n," items in IndexedDB")),!(n>0&&r)){t.next=18;break}o=new Event("dbInitialized"),document.dispatchEvent(o),t.next=21;break;case 18:if("function"!=typeof processAssetGroup){t.next=21;break}return t.next=21,k();case 21:return document.getElementById("db-loading").classList.add("d-none"),console.log("IndexedDB opened successfully"),t.next=26,wait3sec();case 26:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),e.onupgradeneeded=function(t){m(f=t.target.result)};case 6:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}var h=[],v=[],y=!1;function g(){return(g=l(u().mark((function t(){var r,e,n,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(imageRepoPath+"/thumbs/ail.txt");case 3:return r=t.sent,t.next=6,r.text();case 6:e=t.sent,h=e.split("\n").map((function(t){return t.trim()})),y=!0,console.log("AIL list loaded and stored in memory"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("Error reading AIL list:",t.t0);case 15:return t.prev=15,t.next=18,fetch(imageRepoPath+"/thumbs/.ail.txt");case 18:return n=t.sent,t.next=21,n.text();case 21:o=t.sent,v=o.split("\n").map((function(t){return t.trim()})),console.log("Mod AIL list loaded and stored in memory"),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(15),console.error("Error reading Mod AIL list:",t.t1);case 30:case"end":return t.stop()}}),t,null,[[0,12],[15,27]])})))).apply(this,arguments)}function w(t){var r=setInterval((function(){y?clearInterval(r):w(t)}),3e3);var e=h.find((function(r){return b(r)==="White\\"+t&&r.startsWith("White\\")}));if(e)return[e,0];var n=h.find((function(r){return b(r)===t}));if(n)return[n,0];var o=v.find((function(r){return b(r)===t}));return o?[o,1]:null}var b=function(t){return t.substring(0,t.lastIndexOf("."))||t};function m(t){if(!t.objectStoreNames.contains("assetData")){var r=t.createObjectStore("assetData",{keyPath:"PrefabID"});r.createIndex("PrefabID","PrefabID",{unique:!0}),r.createIndex("GUID","GUID",{unique:!0})}t.objectStoreNames.contains("langData")||t.createObjectStore("langData",{keyPath:"key"}).createIndex("key","key",{unique:!0});t.objectStoreNames.contains("supportedMods")||t.createObjectStore("supportedMods",{keyPath:"mod"}).createIndex("mod","mod",{unique:!0});localStorage.removeItem("trackerUpdatedAt")}function x(){return new Promise((function(t,r){var e=f.transaction(["assetData"],"readonly").objectStore("assetData").getAll();e.onsuccess=function(){var r=l(u().mark((function r(e){var n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:0!==(n=e.target.result).length&&void 0!==n.length||t(0),t(n.length);case 3:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),e.onerror=function(t){console.log("Error retrieving data:",t),r(t)}}))}function D(){return D=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelectorAll("[data-lang-game]").forEach(function(){var t=l(u().mark((function t(r){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.dataset.langGame,t.next=3,L(e);case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0=e;case 6:r.textContent=t.t0;case 7:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function k(){return j.apply(this,arguments)}function j(){return j=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var e=f.transaction(["assetData"],"readonly").objectStore("assetData").getAll();e.onsuccess=function(){var r=l(u().mark((function r(e){var n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(n=e.target.result).length&&void 0!==n.length){r.next=6;break}return t(),r.abrupt("return");case 6:if("function"==typeof processAssetGroup){r.next=9;break}return t(),r.abrupt("return");case 9:return r.next=11,processAssetGroup(e.target.result);case 11:t();case 12:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),e.onerror=function(t){console.log("Error retrieving data:",t),r(t)}})));case 1:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}function I(){return(I=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var e=f.transaction(["assetData"],"readonly").objectStore("assetData"),n=[],o=e.openCursor();o.onsuccess=function(r){var e=r.target.result;if(e){var o=e.value;o.UI_Group&&o.UI_Group.startsWith("UIToolbarGroupPrefab")&&n.push(o),e.continue()}else t(n)},o.onerror=function(t){console.log("Error retrieving group data:",t),r(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData"),o=[],a=n.openCursor();a.onsuccess=function(e){var n=e.target.result;if(n){var a=n.value;a.UI_Menu&&a.UI_Menu.startsWith(r)&&o.push(a),n.continue()}else t(o)},a.onerror=function(t){console.log("Error retrieving tab data:",t),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData"),o=[],a=n.openCursor();a.onsuccess=function(e){var n=e.target.result;if(n){var a=n.value;a.SpawnableBuilding_Zone&&a.SpawnableBuilding_Zone==r&&o.push(a),n.continue()}else t(o)},a.onerror=function(t){console.log("Error retrieving tab data:",t),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData"),o=[],a=n.openCursor();a.onsuccess=function(e){var n=e.target.result;if(n){var a=n.value;a.ServiceUpgrade_Buildings&&a.ServiceUpgrade_Buildings==r&&o.push(a),n.continue()}else t(o)},a.onerror=function(t){console.log("Error retrieving tab data:",t),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t){return A.apply(this,arguments)}function A(){return A=l(u().mark((function t(r){var e,n=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>1&&void 0!==n[1]?n[1]:language,t.abrupt("return",new Promise((function(t,n){var o=f.transaction(["langData"],"readonly").objectStore("langData").get(r);o.onsuccess=function(n){var o=n.target.result;t(o&&e in o?o[e]:r)},o.onerror=function(t){console.log("Error retrieving lang data:",t),n(t)}})));case 2:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function O(){return O=l(u().mark((function t(r){var e,n=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>1&&void 0!==n[1]?n[1]:language,t.abrupt("return",new Promise((function(t,n){var o=f.transaction(["langData"],"readonly").objectStore("langData"),a=IDBKeyRange.bound(r,"".concat(r,"￿")),i=o.openCursor(a),c=0,u=null;i.onsuccess=function(n){var o=n.target.result;if(o){var a=o.value;o.key.startsWith(r)&&a&&e in a&&(c++,Math.random()<1/c&&(u=a[e])),o.continue()}else t(u)},i.onerror=function(t){console.log("Error retrieving random lang data:",t),n(t)}})));case 2:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}var _=new Map;function G(){return(G=l(u().mark((function t(r,e){var n,i,c,s,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a(_),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=10;break}if(c=o(i.value,2),s=c[0],l=c[1],!"".concat(e,"--").concat(r).toLowerCase().startsWith(s.toLowerCase())){t.next=8;break}if(!(l.length>0)){t.next=8;break}return t.abrupt("return",Promise.resolve(l));case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:return t.abrupt("return",new Promise((function(t,n){var o=f.transaction(["assetData"],"readonly").objectStore("assetData"),a=[],i=o.openCursor();i.onsuccess=function(o){var i,c=o.target.result;c?("name"==e?i=c.value.PrefabID||"":"guid"==e?i=c.value.GUID||"":n(),i&&i.toLowerCase().includes(r.toLowerCase())&&a.push(c.value),c.continue()):(_.set("".concat(e,"--").concat(r),a),t(a))},i.onerror=function(t){console.error("Error searching assets:",t.target.error),n(t.target.error)}})));case 19:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})))).apply(this,arguments)}function U(){return(U=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData"),o=[],a=n.openCursor();a.onsuccess=function(e){var n=e.target.result;if(n){var a=n.value;a.UI_Group&&a.UI_Group.startsWith(r)&&o.push(a),n.continue()}else t(o)},a.onerror=function(t){console.log("Error retrieving tab data:",t),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(){return(B=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData").get(r);n.onsuccess=function(r){var e=r.target.result;t(e?e.UI_Group:null)},n.onerror=function(t){console.log("Error retrieving data:",t),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData").get(r);n.onsuccess=function(r){var e=r.target.result;t(e?e.UI_Menu:null)},n.onerror=function(t){console.log("Error retrieving data:",t),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData").get(r);n.onsuccess=function(r){var e=r.target.result;t(e?e.UI_Icon:null)},n.onerror=function(t){console.log("Error retrieving data:",t),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(){return(N=l(u().mark((function t(r){var e,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(r)){t.next=3;break}return console.error("Expected array for asset data:",r),t.abrupt("return");case 3:(e=f.transaction(["assetData"],"readwrite")).oncomplete=function(){},e.onerror=function(t){console.log("Transaction error:",t)},n=e.objectStore("assetData"),r.forEach((function(t){n.put(t)}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=l(u().mark((function t(e){var a,i,c,s,l,p,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===n(e)&&!Array.isArray(e)){t.next=3;break}return console.error("Expected array for lang data:",e),t.abrupt("return");case 3:for((a=f.transaction(["langData"],"readwrite")).oncomplete=function(){},a.onerror=function(t){console.log("Transaction error:",t)},i=a.objectStore("langData"),c=0,s=Object.entries(e);c<s.length;c++)l=o(s[c],2),p=l[0],d=l[1],i.put(r({key:p},d));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(){return(W=l(u().mark((function t(r){var e,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(r)){t.next=3;break}return console.error("Expected array for supported mods data:",r),t.abrupt("return");case 3:(e=f.transaction(["supportedMods"],"readwrite")).oncomplete=function(){},e.onerror=function(t){console.log("Transaction error:",t)},n=e.objectStore("supportedMods"),r.forEach((function(t){n.put({mod:t})}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return(F=l(u().mark((function t(r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData").get(r);n.onsuccess=function(r){var e=r.target.result;t(e||null)},n.onerror=function(t){console.log("Error retrieving ".concat(r," data: ").concat(t)),e(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){var t="cities2-AssetDatabase";return new Promise((function(r,e){f.close();var n=p.deleteDatabase(t);n.onsuccess=function(){console.log('Database "'.concat(t,'" deleted successfully')),r(location.reload())},n.onerror=function(r){console.error('Error deleting database "'.concat(t,'":'),r.target.error),e(new Error('Error deleting database "'.concat(t,'": ').concat(r.target.error)))},n.onblocked=function(){console.warn('Deletion of database "'.concat(t,'" is blocked'))}}))}window.db=f,window.initDB=function(){return d.apply(this,arguments)},window.checkAssetData=x,window.getAssetGroupData=function(){return I.apply(this,arguments)},window.deleteIndexedDB=q,window.getAssetTabData=function(t){return S.apply(this,arguments)},window.getAssetPanelData=function(t){return U.apply(this,arguments)},window.getAssetData=k,window.getZoneBuildings=function(t){return E.apply(this,arguments)},window.getBuildingUpgrades=function(t){return P.apply(this,arguments)},window.getLangData=L,window.getLangDataRandomly=function(t){return O.apply(this,arguments)},window.getAssetDataSingle=function(t){return F.apply(this,arguments)},window.addAssetDataAll=function(t){return N.apply(this,arguments)},window.addLangDataAll=function(t){return T.apply(this,arguments)},window.addSupportedModsAll=function(t){return W.apply(this,arguments)},window.loadFile=function(){return g.apply(this,arguments)},window.findValueInLines=w,window.findValueInLinesCail=function(t){var r=setInterval((function(){y?clearInterval(r):w(t)}),3e3),e=h.find((function(r){return b(r)==="cail\\"+t&&r.startsWith("cail\\")}));return e||null},window.searchInIndexedDB=function(t){return new Promise((function(r,e){var n=f.transaction(["assetData"],"readonly").objectStore("assetData"),o=[],a=n.openCursor();a.onsuccess=function(e){var n=e.target.result;if(n){var a=n.value,i=n.key,c=!1;for(var u in a)if(a.hasOwnProperty(u)&&"string"==typeof a[u]&&a[u].includes(t)){c=!0;break}c&&o.push(i),n.continue()}else r(o)},a.onerror=function(t){e(t.target.error)}}))},window.updateLangGame=function(){return D.apply(this,arguments)},window.getPrefabUIGroup=function(t){return B.apply(this,arguments)},window.getPrefabUIMenu=function(t){return C.apply(this,arguments)},window.getPrefabUIIcon=function(t){return M.apply(this,arguments)},window.searchAssets=function(t,r){return G.apply(this,arguments)}})();